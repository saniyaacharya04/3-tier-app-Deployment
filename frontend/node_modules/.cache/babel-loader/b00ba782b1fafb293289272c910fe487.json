{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import api from\"./services/api\";import{jsxs as _jsxs,jsx as _jsx,Fragment as _Fragment}from\"react/jsx-runtime\";export default function Tasks(_ref){let{user,onLogout}=_ref;const[task,setTask]=useState(\"\");const[description,setDescription]=useState(\"\");const[tasks,setTasks]=useState([]);const[editingId,setEditingId]=useState(null);const[editText,setEditText]=useState(\"\");const token=localStorage.getItem(\"token\");const fetchTasks=async()=>{try{const res=await api.get(\"/tasks\",{headers:{Authorization:\"Bearer \".concat(token)}});setTasks(res.data);}catch(err){console.error(\"Failed to fetch tasks:\",err);}};const createTask=async()=>{if(!(user!==null&&user!==void 0&&user.id)||!task.trim()){alert(\"User ID and task title are required\");return;}const payload={user_id:user.id,title:task,description:description||\"\",status:\"pending\"};try{const res=await api.post(\"/tasks\",payload,{headers:{Authorization:\"Bearer \".concat(token)}});setTasks([...tasks,res.data]);setTask(\"\");setDescription(\"\");}catch(err){console.error(\"Failed to create task:\",err);alert(\"❌ Task creation failed\");}};const deleteTask=async id=>{try{await api.delete(\"/tasks/\".concat(id),{headers:{Authorization:\"Bearer \".concat(token)}});setTasks(tasks.filter(t=>t.id!==id));}catch(err){console.error(\"Failed to delete task:\",err);}};const startEditing=task=>{setEditingId(task.id);setEditText(task.title);};const cancelEditing=()=>{setEditingId(null);setEditText(\"\");};const updateTask=async()=>{try{const res=await api.put(\"/tasks/\".concat(editingId),{title:editText},{headers:{Authorization:\"Bearer \".concat(token)}});setTasks(tasks.map(t=>t.id===editingId?res.data:t));cancelEditing();}catch(err){console.error(\"Failed to update task:\",err);}};useEffect(()=>{fetchTasks();},[]);return/*#__PURE__*/_jsxs(\"div\",{style:{padding:\"2rem\"},children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"Welcome, \",user.name]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:\"1rem\"},children:[/*#__PURE__*/_jsx(\"input\",{value:task,onChange:e=>setTask(e.target.value),placeholder:\"New task\",style:{padding:\"0.5rem\",width:\"300px\"}}),/*#__PURE__*/_jsx(\"input\",{value:description,onChange:e=>setDescription(e.target.value),placeholder:\"Description\",style:{padding:\"0.5rem\",width:\"300px\",marginLeft:\"1rem\"}}),/*#__PURE__*/_jsx(\"button\",{onClick:createTask,style:{marginLeft:\"1rem\"},children:\"Add Task\"})]}),/*#__PURE__*/_jsx(\"ul\",{children:tasks.map(t=>/*#__PURE__*/_jsx(\"li\",{style:{marginBottom:\"0.5rem\"},children:editingId===t.id?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"input\",{value:editText,onChange:e=>setEditText(e.target.value),style:{padding:\"0.3rem\",width:\"250px\"}}),/*#__PURE__*/_jsx(\"button\",{onClick:updateTask,style:{marginLeft:\"0.5rem\"},children:\"Save\"}),/*#__PURE__*/_jsx(\"button\",{onClick:cancelEditing,style:{marginLeft:\"0.5rem\"},children:\"Cancel\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"strong\",{children:t.title}),\" \\u2014 \",t.description,/*#__PURE__*/_jsx(\"button\",{onClick:()=>startEditing(t),style:{marginLeft:\"1rem\"},children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>deleteTask(t.id),style:{marginLeft:\"0.5rem\"},children:\"Delete\"})]})},t.id))}),/*#__PURE__*/_jsx(\"button\",{onClick:onLogout,style:{marginTop:\"2rem\"},children:\"Logout\"})]});}","map":{"version":3,"names":["React","useState","useEffect","api","jsxs","_jsxs","jsx","_jsx","Fragment","_Fragment","Tasks","_ref","user","onLogout","task","setTask","description","setDescription","tasks","setTasks","editingId","setEditingId","editText","setEditText","token","localStorage","getItem","fetchTasks","res","get","headers","Authorization","concat","data","err","console","error","createTask","id","trim","alert","payload","user_id","title","status","post","deleteTask","delete","filter","t","startEditing","cancelEditing","updateTask","put","map","style","padding","children","name","marginBottom","value","onChange","e","target","placeholder","width","marginLeft","onClick","marginTop"],"sources":["/Users/saniyaacharya/Desktop/3-tier-app-Deployment-1/frontend/src/Tasks.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport api from \"./services/api\";\n\nexport default function Tasks({ user, onLogout }) {\n  const [task, setTask] = useState(\"\");\n  const [description, setDescription] = useState(\"\");\n  const [tasks, setTasks] = useState([]);\n  const [editingId, setEditingId] = useState(null);\n  const [editText, setEditText] = useState(\"\");\n  const token = localStorage.getItem(\"token\");\n\n  const fetchTasks = async () => {\n    try {\n      const res = await api.get(\"/tasks\", {\n        headers: { Authorization: `Bearer ${token}` }\n      });\n      setTasks(res.data);\n    } catch (err) {\n      console.error(\"Failed to fetch tasks:\", err);\n    }\n  };\n\n  const createTask = async () => {\n    if (!user?.id || !task.trim()) {\n      alert(\"User ID and task title are required\");\n      return;\n    }\n\n    const payload = {\n      user_id: user.id,\n      title: task,\n      description: description || \"\",\n      status: \"pending\"\n    };\n\n    try {\n      const res = await api.post(\"/tasks\", payload, {\n        headers: { Authorization: `Bearer ${token}` }\n      });\n      setTasks([...tasks, res.data]);\n      setTask(\"\");\n      setDescription(\"\");\n    } catch (err) {\n      console.error(\"Failed to create task:\", err);\n      alert(\"❌ Task creation failed\");\n    }\n  };\n\n  const deleteTask = async (id) => {\n    try {\n      await api.delete(`/tasks/${id}`, {\n        headers: { Authorization: `Bearer ${token}` }\n      });\n      setTasks(tasks.filter((t) => t.id !== id));\n    } catch (err) {\n      console.error(\"Failed to delete task:\", err);\n    }\n  };\n\n  const startEditing = (task) => {\n    setEditingId(task.id);\n    setEditText(task.title);\n  };\n\n  const cancelEditing = () => {\n    setEditingId(null);\n    setEditText(\"\");\n  };\n\n  const updateTask = async () => {\n    try {\n      const res = await api.put(\n        `/tasks/${editingId}`,\n        { title: editText },\n        { headers: { Authorization: `Bearer ${token}` } }\n      );\n      setTasks(tasks.map((t) => (t.id === editingId ? res.data : t)));\n      cancelEditing();\n    } catch (err) {\n      console.error(\"Failed to update task:\", err);\n    }\n  };\n\n  useEffect(() => {\n    fetchTasks();\n  }, []);\n\n  return (\n    <div style={{ padding: \"2rem\" }}>\n      <h2>Welcome, {user.name}</h2>\n\n      <div style={{ marginBottom: \"1rem\" }}>\n        <input\n          value={task}\n          onChange={(e) => setTask(e.target.value)}\n          placeholder=\"New task\"\n          style={{ padding: \"0.5rem\", width: \"300px\" }}\n        />\n        <input\n          value={description}\n          onChange={(e) => setDescription(e.target.value)}\n          placeholder=\"Description\"\n          style={{ padding: \"0.5rem\", width: \"300px\", marginLeft: \"1rem\" }}\n        />\n        <button onClick={createTask} style={{ marginLeft: \"1rem\" }}>\n          Add Task\n        </button>\n      </div>\n\n      <ul>\n        {tasks.map((t) => (\n          <li key={t.id} style={{ marginBottom: \"0.5rem\" }}>\n            {editingId === t.id ? (\n              <>\n                <input\n                  value={editText}\n                  onChange={(e) => setEditText(e.target.value)}\n                  style={{ padding: \"0.3rem\", width: \"250px\" }}\n                />\n                <button onClick={updateTask} style={{ marginLeft: \"0.5rem\" }}>\n                  Save\n                </button>\n                <button onClick={cancelEditing} style={{ marginLeft: \"0.5rem\" }}>\n                  Cancel\n                </button>\n              </>\n            ) : (\n              <>\n                <strong>{t.title}</strong> — {t.description}\n                <button onClick={() => startEditing(t)} style={{ marginLeft: \"1rem\" }}>\n                  Edit\n                </button>\n                <button onClick={() => deleteTask(t.id)} style={{ marginLeft: \"0.5rem\" }}>\n                  Delete\n                </button>\n              </>\n            )}\n          </li>\n        ))}\n      </ul>\n\n      <button onClick={onLogout} style={{ marginTop: \"2rem\" }}>\n        Logout\n      </button>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}