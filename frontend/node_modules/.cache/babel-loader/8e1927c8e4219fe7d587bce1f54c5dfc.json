{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import api from\"./services/api\";import{jsxs as _jsxs,jsx as _jsx,Fragment as _Fragment}from\"react/jsx-runtime\";export default function Tasks(_ref){let{user,onLogout}=_ref;const[task,setTask]=useState(\"\");const[tasks,setTasks]=useState([]);const[editingId,setEditingId]=useState(null);const[editText,setEditText]=useState(\"\");const token=localStorage.getItem(\"token\");const fetchTasks=async()=>{try{const res=await api.get(\"/tasks\",{headers:{Authorization:\"Bearer \".concat(token)}});setTasks(res.data);}catch(err){console.error(\"Failed to fetch tasks:\",err);}};const createTask=async()=>{try{const res=await api.post(\"/tasks\",{title:task},{headers:{Authorization:\"Bearer \".concat(token)}});setTasks([...tasks,res.data]);setTask(\"\");}catch(err){console.error(\"Failed to create task:\",err);}};const deleteTask=async id=>{try{await api.delete(\"/tasks/\".concat(id),{headers:{Authorization:\"Bearer \".concat(token)}});setTasks(tasks.filter(t=>t.id!==id));}catch(err){console.error(\"Failed to delete task:\",err);}};const startEditing=task=>{setEditingId(task.id);setEditText(task.title);};const cancelEditing=()=>{setEditingId(null);setEditText(\"\");};const updateTask=async()=>{try{const res=await api.put(\"/tasks/\".concat(editingId),{title:editText},{headers:{Authorization:\"Bearer \".concat(token)}});setTasks(tasks.map(t=>t.id===editingId?res.data:t));cancelEditing();}catch(err){console.error(\"Failed to update task:\",err);}};// eslint-disable-next-line react-hooks/exhaustive-deps\nuseEffect(()=>{fetchTasks();},[]);return/*#__PURE__*/_jsxs(\"div\",{style:{padding:\"2rem\"},children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"Welcome, \",user.name]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:\"1rem\"},children:[/*#__PURE__*/_jsx(\"input\",{value:task,onChange:e=>setTask(e.target.value),placeholder:\"New task\",style:{padding:\"0.5rem\",width:\"300px\"}}),/*#__PURE__*/_jsx(\"button\",{onClick:createTask,style:{marginLeft:\"1rem\"},children:\"Add Task\"})]}),/*#__PURE__*/_jsx(\"ul\",{children:tasks.map(t=>/*#__PURE__*/_jsx(\"li\",{style:{marginBottom:\"0.5rem\"},children:editingId===t.id?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"input\",{value:editText,onChange:e=>setEditText(e.target.value),style:{padding:\"0.3rem\",width:\"250px\"}}),/*#__PURE__*/_jsx(\"button\",{onClick:updateTask,style:{marginLeft:\"0.5rem\"},children:\"Save\"}),/*#__PURE__*/_jsx(\"button\",{onClick:cancelEditing,style:{marginLeft:\"0.5rem\"},children:\"Cancel\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[t.title,/*#__PURE__*/_jsx(\"button\",{onClick:()=>startEditing(t),style:{marginLeft:\"1rem\"},children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>deleteTask(t.id),style:{marginLeft:\"0.5rem\"},children:\"Delete\"})]})},t.id))}),/*#__PURE__*/_jsx(\"button\",{onClick:onLogout,style:{marginTop:\"2rem\"},children:\"Logout\"})]});}","map":{"version":3,"names":["React","useState","useEffect","api","jsxs","_jsxs","jsx","_jsx","Fragment","_Fragment","Tasks","_ref","user","onLogout","task","setTask","tasks","setTasks","editingId","setEditingId","editText","setEditText","token","localStorage","getItem","fetchTasks","res","get","headers","Authorization","concat","data","err","console","error","createTask","post","title","deleteTask","id","delete","filter","t","startEditing","cancelEditing","updateTask","put","map","style","padding","children","name","marginBottom","value","onChange","e","target","placeholder","width","onClick","marginLeft","marginTop"],"sources":["/Users/saniyaacharya/Desktop/3-tier-app-Deployment-1/frontend/src/Tasks.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport api from \"./services/api\";\n\nexport default function Tasks({ user, onLogout }) {\n  const [task, setTask] = useState(\"\");\n  const [tasks, setTasks] = useState([]);\n  const [editingId, setEditingId] = useState(null);\n  const [editText, setEditText] = useState(\"\");\n\n  const token = localStorage.getItem(\"token\");\n\n  const fetchTasks = async () => {\n    try {\n      const res = await api.get(\"/tasks\", {\n        headers: { Authorization: `Bearer ${token}` }\n      });\n      setTasks(res.data);\n    } catch (err) {\n      console.error(\"Failed to fetch tasks:\", err);\n    }\n  };\n\n  const createTask = async () => {\n    try {\n      const res = await api.post(\n        \"/tasks\",\n        { title: task },\n        { headers: { Authorization: `Bearer ${token}` } }\n      );\n      setTasks([...tasks, res.data]);\n      setTask(\"\");\n    } catch (err) {\n      console.error(\"Failed to create task:\", err);\n    }\n  };\n\n  const deleteTask = async (id) => {\n    try {\n      await api.delete(`/tasks/${id}`, {\n        headers: { Authorization: `Bearer ${token}` }\n      });\n      setTasks(tasks.filter((t) => t.id !== id));\n    } catch (err) {\n      console.error(\"Failed to delete task:\", err);\n    }\n  };\n\n  const startEditing = (task) => {\n    setEditingId(task.id);\n    setEditText(task.title);\n  };\n\n  const cancelEditing = () => {\n    setEditingId(null);\n    setEditText(\"\");\n  };\n\n  const updateTask = async () => {\n    try {\n      const res = await api.put(\n        `/tasks/${editingId}`,\n        { title: editText },\n        { headers: { Authorization: `Bearer ${token}` } }\n      );\n      setTasks(tasks.map((t) => (t.id === editingId ? res.data : t)));\n      cancelEditing();\n    } catch (err) {\n      console.error(\"Failed to update task:\", err);\n    }\n  };\n\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  useEffect(() => {\n    fetchTasks();\n  }, []);\n\n  return (\n    <div style={{ padding: \"2rem\" }}>\n      <h2>Welcome, {user.name}</h2>\n\n      <div style={{ marginBottom: \"1rem\" }}>\n        <input\n          value={task}\n          onChange={(e) => setTask(e.target.value)}\n          placeholder=\"New task\"\n          style={{ padding: \"0.5rem\", width: \"300px\" }}\n        />\n        <button onClick={createTask} style={{ marginLeft: \"1rem\" }}>\n          Add Task\n        </button>\n      </div>\n\n      <ul>\n        {tasks.map((t) => (\n          <li key={t.id} style={{ marginBottom: \"0.5rem\" }}>\n            {editingId === t.id ? (\n              <>\n                <input\n                  value={editText}\n                  onChange={(e) => setEditText(e.target.value)}\n                  style={{ padding: \"0.3rem\", width: \"250px\" }}\n                />\n                <button onClick={updateTask} style={{ marginLeft: \"0.5rem\" }}>\n                  Save\n                </button>\n                <button onClick={cancelEditing} style={{ marginLeft: \"0.5rem\" }}>\n                  Cancel\n                </button>\n              </>\n            ) : (\n              <>\n                {t.title}\n                <button onClick={() => startEditing(t)} style={{ marginLeft: \"1rem\" }}>\n                  Edit\n                </button>\n                <button onClick={() => deleteTask(t.id)} style={{ marginLeft: \"0.5rem\" }}>\n                  Delete\n                </button>\n              </>\n            )}\n          </li>\n        ))}\n      </ul>\n\n      <button onClick={onLogout} style={{ marginTop: \"2rem\" }}>\n        Logout\n      </button>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}