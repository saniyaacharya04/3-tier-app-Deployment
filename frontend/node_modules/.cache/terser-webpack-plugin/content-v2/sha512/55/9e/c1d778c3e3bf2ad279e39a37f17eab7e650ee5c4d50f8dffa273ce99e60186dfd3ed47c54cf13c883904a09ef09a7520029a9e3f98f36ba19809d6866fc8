{"code":"(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{23:function(e,t,a){},44:function(e,t,a){\"use strict\";a.r(t);var r=a(0),o=a.n(r),s=a(5),n=a.n(s),c=(a(23),a(8)),l=a(2),i=a(17),u=a(18);var j=a.n(u).a.create({baseURL:\"http://localhost:8080/api/users\"});var d=a(3);function b(e){let{onLogin:t}=e;const[a,o]=Object(r.useState)(\"\"),[s,n]=Object(r.useState)(\"\"),[c,l]=Object(r.useState)(\"\");return Object(d.jsxs)(\"div\",{children:[Object(d.jsx)(\"h2\",{children:\"Login\"}),Object(d.jsxs)(\"form\",{onSubmit:async e=>{e.preventDefault();try{var r,o;const e=await(i={email:a,password:s},j.post(\"/users/login\",i));null!==(r=e.data)&&void 0!==r&&r.user&&null!==(o=e.data)&&void 0!==o&&o.token?(localStorage.setItem(\"token\",e.data.token),localStorage.setItem(\"user\",JSON.stringify(e.data.user)),t(e.data.user)):l(\"Invalid response from server\")}catch(u){var n,c;l((null===(n=u.response)||void 0===n||null===(c=n.data)||void 0===c?void 0:c.error)||\"Server error, please try again later.\")}var i},children:[Object(d.jsx)(\"input\",{type:\"email\",placeholder:\"Email\",value:a,onChange:e=>o(e.target.value),required:!0}),Object(d.jsx)(\"input\",{type:\"password\",placeholder:\"Password\",value:s,onChange:e=>n(e.target.value),required:!0}),Object(d.jsx)(\"button\",{type:\"submit\",children:\"Login\"})]}),c&&Object(d.jsx)(\"p\",{style:{color:\"red\"},children:c})]})}var g=function(){const[e,t]=Object(r.useState)(\"\"),[a,o]=Object(r.useState)(\"\"),[s,n]=Object(r.useState)(\"\"),c=Object(l.q)();return Object(d.jsxs)(\"div\",{className:\"auth-container\",children:[Object(d.jsx)(\"h2\",{children:\"Register\"}),Object(d.jsxs)(\"form\",{onSubmit:async t=>{t.preventDefault();try{await(s={email:e,password:a},j.post(\"/users/register\",s)),alert(\"\\u2705 Registration successful! Please login.\"),c(\"/login\")}catch(l){var r,o;n((null===(r=l.response)||void 0===r||null===(o=r.data)||void 0===o?void 0:o.error)||\"Registration failed.\"),console.error(\"Register error:\",l)}var s},children:[Object(d.jsx)(\"input\",{type:\"email\",placeholder:\"Email\",value:e,onChange:e=>t(e.target.value),required:!0}),Object(d.jsx)(\"input\",{type:\"password\",placeholder:\"Password\",value:a,onChange:e=>o(e.target.value),required:!0}),Object(d.jsx)(\"button\",{type:\"submit\",children:\"Register\"})]}),s&&Object(d.jsx)(\"p\",{style:{color:\"red\"},children:s}),Object(d.jsx)(\"p\",{onClick:()=>c(\"/login\"),style:{cursor:\"pointer\"},children:\"Already have an account? Login\"})]})};function h(e){let{user:t,onLogout:a}=e;const[o,s]=Object(r.useState)(\"\"),[n,c]=Object(r.useState)([]),l=localStorage.getItem(\"token\");return useEffect(()=>{(async()=>{const e=await j.get(\"/tasks\",{headers:{Authorization:\"Bearer \".concat(l)}});c(e.data)})()},[]),Object(d.jsxs)(\"div\",{children:[Object(d.jsxs)(\"h2\",{children:[\"Welcome, \",t.name]}),Object(d.jsx)(\"input\",{value:o,onChange:e=>s(e.target.value),placeholder:\"New task\"}),Object(d.jsx)(\"button\",{onClick:async()=>{const e=await j.post(\"/tasks\",{title:o},{headers:{Authorization:\"Bearer \".concat(l)}});c([...n,e.data]),s(\"\")},children:\"Add Task\"}),Object(d.jsx)(\"ul\",{children:n.map(e=>Object(d.jsx)(\"li\",{children:e.title},e.id))}),Object(d.jsx)(\"button\",{onClick:a,children:\"Logout\"})]})}var p=function(){const[e,t]=Object(r.useState)(null);Object(r.useEffect)(()=>{const e=localStorage.getItem(\"token\"),a=localStorage.getItem(\"user\");if(e)try{const{exp:r}=Object(i.a)(e);Date.now()>=1e3*r?(localStorage.clear(),t(null)):a&&t(JSON.parse(a))}catch(r){console.error(\"Invalid token:\",r),localStorage.clear(),t(null)}},[]),Object(r.useEffect)(()=>{e?localStorage.setItem(\"user\",JSON.stringify(e)):localStorage.removeItem(\"user\")},[e]);const a=!!localStorage.getItem(\"token\");return Object(d.jsx)(c.a,{children:Object(d.jsxs)(l.d,{children:[Object(d.jsx)(l.b,{path:\"/login\",element:Object(d.jsx)(b,{onLogin:t})}),Object(d.jsx)(l.b,{path:\"/register\",element:Object(d.jsx)(g,{})}),Object(d.jsx)(l.b,{path:\"/tasks\",element:a?Object(d.jsx)(h,{user:e,onLogout:()=>{localStorage.removeItem(\"token\"),localStorage.removeItem(\"user\"),t(null),window.location.href=\"/login\"}}):Object(d.jsx)(l.a,{to:\"/login\",replace:!0})}),Object(d.jsx)(l.b,{path:\"*\",element:Object(d.jsx)(l.a,{to:\"/login\",replace:!0})})]})})};n.a.render(Object(d.jsx)(o.a.StrictMode,{children:Object(d.jsx)(\"div\",{className:\"app-wrapper\",children:Object(d.jsx)(p,{})})}),document.getElementById(\"root\"))}},[[44,1,2]]]);","name":"static/js/main.6a067b50.chunk.js","map":{"version":3,"names":["this","push","module","exports","__webpack_require__","__webpack_exports__","r","react","react_default","n","react_dom","react_dom_default","dist","react_router_dist","esm","axios","services_api","a","create","baseURL","jsx_runtime","Login","_ref","onLogin","email","setEmail","Object","password","setPassword","error","setError","children","onSubmit","async","e","preventDefault","_res$data","_res$data2","res","credentials","post","data","user","token","localStorage","setItem","JSON","stringify","err","_err$response","_err$response$data","response","type","placeholder","value","onChange","target","required","style","color","register","navigate","className","userData","alert","console","onClick","cursor","Tasks","onLogout","task","setTask","tasks","setTasks","getItem","useEffect","get","headers","Authorization","concat","fetchTasks","name","title","map","t","id","src_App","setUser","storedUser","exp","Date","now","clear","parse","removeItem","isAuthenticated","path","element","window","location","href","to","replace","render","StrictMode","document","getElementById"],"sources":["static/js/main.6a067b50.chunk.js"],"mappings":"CAACA,KAAyB,mBAAIA,KAAyB,oBAAK,IAAIC,KAAK,CAAC,CAAC,GAAG,CAEpE,GACA,SAAUC,EAAQC,EAASC,GAI1B,EAED,GACA,SAAUF,EAAQG,EAAqBD,GAE7C,aAEAA,EAAoBE,EAAED,GAGtB,IAAIE,EAAQH,EAAoB,GAC5BI,EAA6BJ,EAAoBK,EAAEF,GAGnDG,EAAYN,EAAoB,GAChCO,EAAiCP,EAAoBK,EAAEC,GAMvDE,GAHMR,EAAoB,IAGnBA,EAAoB,IAG3BS,EAAoBT,EAAoB,GAGxCU,EAAMV,EAAoB,IAG1BW,EAAQX,EAAoB,IAMA,IAAIY,EALHZ,EAAoBK,EAAEM,GAI/BE,EAAEC,OAAO,CAACC,QAAQ,oCAM1C,IAAIC,EAAchB,EAAoB,GAGtC,SAASiB,EAAMC,GAAM,IAAGC,QAACA,GAASD,EAAK,MAAME,EAAMC,GAAUC,OAAOnB,EAAgB,SAAvBmB,CAA0B,KAAUC,EAASC,GAAaF,OAAOnB,EAAgB,SAAvBmB,CAA0B,KAAUG,EAAMC,GAAUJ,OAAOnB,EAAgB,SAAvBmB,CAA0B,IAEmI,OAAmBA,OAAON,EAAkB,KAAzBM,CAA4B,MAAM,CAACK,SAAS,CAAcL,OAAON,EAAiB,IAAxBM,CAA2B,KAAK,CAACK,SAAS,UAAuBL,OAAON,EAAkB,KAAzBM,CAA4B,OAAO,CAACM,SAF9RC,UAAUC,EAAEC,iBAAiB,IAAI,IAAIC,EAAUC,EAAW,MAAMC,QANzQC,EAM6R,CAACf,QAAMG,YANhRX,EAAawB,KAAK,eAAeD,IAMoR,QAAtBH,EAAUE,EAAIG,YAA0B,IAAZL,GAAoBA,EAAUM,MAA8B,QAAvBL,EAAWC,EAAIG,YAA2B,IAAbJ,GAAqBA,EAAWM,OACpcC,aAAaC,QAAQ,QAAQP,EAAIG,KAAKE,OAAOC,aAAaC,QAAQ,OAAOC,KAAKC,UAAUT,EAAIG,KAAKC,OAAOnB,EAAQe,EAAIG,KAAKC,OACnHZ,EAAS,+BAAiC,CAAC,MAAMkB,GAAK,IAAIC,EAAcC,EAAmBpB,GAAyC,QAA9BmB,EAAcD,EAAIG,gBAAkC,IAAhBF,GAAwE,QAAzCC,EAAmBD,EAAcR,YAAmC,IAArBS,OAAvD,EAA0FA,EAAmBrB,QAAQ,wCAAyC,CARrU,IAAmBU,GAQ6fR,SAAS,CAAcL,OAAON,EAAiB,IAAxBM,CAA2B,QAAQ,CAAC0B,KAAK,QAAQC,YAAY,QAAQC,MAAM9B,EAAM+B,SAASrB,GAAGT,EAASS,EAAEsB,OAAOF,OAAOG,UAAS,IAAoB/B,OAAON,EAAiB,IAAxBM,CAA2B,QAAQ,CAAC0B,KAAK,WAAWC,YAAY,WAAWC,MAAM3B,EAAS4B,SAASrB,GAAGN,EAAYM,EAAEsB,OAAOF,OAAOG,UAAS,IAAoB/B,OAAON,EAAiB,IAAxBM,CAA2B,SAAS,CAAC0B,KAAK,SAASrB,SAAS,aAAaF,GAAoBH,OAAON,EAAiB,IAAxBM,CAA2B,IAAI,CAACgC,MAAM,CAACC,MAAM,OAAO5B,SAASF,MAAW,CAE0kB,IAAI+B,EAA5kD,WAAoB,MAAMpC,EAAMC,GAAUC,OAAOnB,EAAgB,SAAvBmB,CAA0B,KAAUC,EAASC,GAAaF,OAAOnB,EAAgB,SAAvBmB,CAA0B,KAAUG,EAAMC,GAAUJ,OAAOnB,EAAgB,SAAvBmB,CAA0B,IAAUmC,EAASnC,OAAOb,EAAuC,EAA9Ca,GAA6f,OAAmBA,OAAON,EAAkB,KAAzBM,CAA4B,MAAM,CAACoC,UAAU,iBAAiB/B,SAAS,CAAcL,OAAON,EAAiB,IAAxBM,CAA2B,KAAK,CAACK,SAAS,aAA0BL,OAAON,EAAkB,KAAzBM,CAA4B,OAAO,CAACM,SAAvoBC,UAAUC,EAAEC,iBAAiB,UAV5L4B,EAUmN,CAACvC,QAAMG,YAVzMX,EAAawB,KAAK,kBAAkBuB,IAUgLC,MAAM,iDAA4CH,EAAS,SAAU,CAAC,MAAMb,GAAK,IAAIC,EAAcC,EAAmBpB,GAAyC,QAA9BmB,EAAcD,EAAIG,gBAAkC,IAAhBF,GAAwE,QAAzCC,EAAmBD,EAAcR,YAAmC,IAArBS,OAAvD,EAA0FA,EAAmBrB,QAAQ,wBAAwBoC,QAAQpC,MAAM,kBAAkBmB,EAAK,CAVzmB,IAAsBe,GAU4zBhC,SAAS,CAAcL,OAAON,EAAiB,IAAxBM,CAA2B,QAAQ,CAAC0B,KAAK,QAAQC,YAAY,QAAQC,MAAM9B,EAAM+B,SAASrB,GAAGT,EAASS,EAAEsB,OAAOF,OAAOG,UAAS,IAAoB/B,OAAON,EAAiB,IAAxBM,CAA2B,QAAQ,CAAC0B,KAAK,WAAWC,YAAY,WAAWC,MAAM3B,EAAS4B,SAASrB,GAAGN,EAAYM,EAAEsB,OAAOF,OAAOG,UAAS,IAAoB/B,OAAON,EAAiB,IAAxBM,CAA2B,SAAS,CAAC0B,KAAK,SAASrB,SAAS,gBAAgBF,GAAoBH,OAAON,EAAiB,IAAxBM,CAA2B,IAAI,CAACgC,MAAM,CAACC,MAAM,OAAO5B,SAASF,IAAqBH,OAAON,EAAiB,IAAxBM,CAA2B,IAAI,CAACwC,QAAQ,IAAIL,EAAS,UAAUH,MAAM,CAACS,OAAO,WAAWpC,SAAS,qCAAsC,EAE1iD,SAASqC,EAAM9C,GAAM,IAAGoB,KAACA,EAAI2B,SAACA,GAAU/C,EAAK,MAAMgD,EAAKC,GAAS7C,OAAOnB,EAAgB,SAAvBmB,CAA0B,KAAU8C,EAAMC,GAAU/C,OAAOnB,EAAgB,SAAvBmB,CAA0B,IAAUiB,EAAMC,aAAa8B,QAAQ,SAA0W,OAAlCC,UAAU,KAAxT1C,WAAU,MAAMK,QAAUtB,EAAa4D,IAAI,SAAS,CAACC,QAAQ,CAACC,cAAc,UAAUC,OAAOpC,MAAU8B,EAASnC,EAAIG,OAAyMuC,IAAe,IAAuBtD,OAAON,EAAkB,KAAzBM,CAA4B,MAAM,CAACK,SAAS,CAAcL,OAAON,EAAkB,KAAzBM,CAA4B,KAAK,CAACK,SAAS,CAAC,YAAYW,EAAKuC,QAAqBvD,OAAON,EAAiB,IAAxBM,CAA2B,QAAQ,CAAC4B,MAAMgB,EAAKf,SAASrB,GAAGqC,EAAQrC,EAAEsB,OAAOF,OAAOD,YAAY,aAA0B3B,OAAON,EAAiB,IAAxBM,CAA2B,SAAS,CAACwC,QAAhgBjC,UAAU,MAAMK,QAAUtB,EAAawB,KAAK,SAAS,CAAC0C,MAAMZ,GAAM,CAACO,QAAQ,CAACC,cAAc,UAAUC,OAAOpC,MAAU8B,EAAS,IAAID,EAAMlC,EAAIG,OAAO8B,EAAQ,KAAwXxC,SAAS,aAA0BL,OAAON,EAAiB,IAAxBM,CAA2B,KAAK,CAACK,SAASyC,EAAMW,IAAIC,GAAgB1D,OAAON,EAAiB,IAAxBM,CAA2B,KAAK,CAACK,SAASqD,EAAEF,OAAOE,EAAEC,OAAoB3D,OAAON,EAAiB,IAAxBM,CAA2B,SAAS,CAACwC,QAAQG,EAAStC,SAAS,aAAc,CAM4F,IAAIuD,EAJ3sC,WAAe,MAAM5C,EAAK6C,GAAS7D,OAAOnB,EAAgB,SAAvBmB,CAA0B,MAC7DA,OAAOnB,EAAiB,UAAxBmB,CAA2B,KAAK,MAAMiB,EAAMC,aAAa8B,QAAQ,SAAec,EAAW5C,aAAa8B,QAAQ,QAAQ,GAAG/B,EAAO,IAAI,MAAK8C,IAACA,GAAK/D,OAAOZ,EAAuB,EAA9BY,CAAiCiB,GAAU+C,KAAKC,OAAW,IAAJF,GACxM7C,aAAagD,QAAQL,EAAQ,OAAeC,GAAYD,EAAQzC,KAAK+C,MAAML,GAAc,CAAC,MAAMxC,GAAKiB,QAAQpC,MAAM,iBAAiBmB,GAAKJ,aAAagD,QAAQL,EAAQ,KAAM,GAAI,IAChL7D,OAAOnB,EAAiB,UAAxBmB,CAA2B,KAAQgB,EAAME,aAAaC,QAAQ,OAAOC,KAAKC,UAAUL,IAAaE,aAAakD,WAAW,SAAW,CAACpD,IACrI,MAA6IqD,IAAkBnD,aAAa8B,QAAQ,SAAS,OAAmBhD,OAAON,EAAiB,IAAxBM,CAA2Bd,EAA4B,EAAE,CAACmB,SAAsBL,OAAON,EAAkB,KAAzBM,CAA4Bb,EAAkC,EAAE,CAACkB,SAAS,CAAcL,OAAON,EAAiB,IAAxBM,CAA2Bb,EAAiC,EAAE,CAACmF,KAAK,SAASC,QAAqBvE,OAAON,EAAiB,IAAxBM,CAA2BL,EAAM,CAACE,QAAQgE,MAAyB7D,OAAON,EAAiB,IAAxBM,CAA2Bb,EAAiC,EAAE,CAACmF,KAAK,YAAYC,QAAqBvE,OAAON,EAAiB,IAAxBM,CAA2BkC,EAAS,CAAC,KAAkBlC,OAAON,EAAiB,IAAxBM,CAA2Bb,EAAiC,EAAE,CAACmF,KAAK,SAASC,QAAQF,EAA6BrE,OAAON,EAAiB,IAAxBM,CAA2B0C,EAAM,CAAC1B,KAAKA,EAAK2B,SAAp0B,KAAKzB,aAAakD,WAAW,SAASlD,aAAakD,WAAW,QAAQP,EAAQ,MAAMW,OAAOC,SAASC,KAAK,YAAgwB1E,OAAON,EAAiB,IAAxBM,CAA2Bb,EAAoC,EAAE,CAACwF,GAAG,SAASC,SAAQ,MAAsB5E,OAAON,EAAiB,IAAxBM,CAA2Bb,EAAiC,EAAE,CAACmF,KAAK,IAAIC,QAAqBvE,OAAON,EAAiB,IAAxBM,CAA2Bb,EAAoC,EAAE,CAACwF,GAAG,SAASC,SAAQ,UAAc,EAEzqC3F,EAAkBM,EAAEsF,OAAoB7E,OAAON,EAAiB,IAAxBM,CAA2BlB,EAAcS,EAAEuF,WAAW,CAACzE,SAAsBL,OAAON,EAAiB,IAAxBM,CAA2B,MAAM,CAACoC,UAAU,cAAc/B,SAAsBL,OAAON,EAAiB,IAAxBM,CAA2B4D,EAAQ,CAAC,OAAOmB,SAASC,eAAe,QAEjQ,GAEL,CAAC,CAAC,GAAG,EAAE","ignoreList":[]},"input":"(this[\"webpackJsonpclient\"] = this[\"webpackJsonpclient\"] || []).push([[0],{\n\n/***/ 23:\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n\n/***/ 44:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXTERNAL MODULE: ./node_modules/react/index.js\nvar react = __webpack_require__(0);\nvar react_default = /*#__PURE__*/__webpack_require__.n(react);\n\n// EXTERNAL MODULE: ./node_modules/react-dom/index.js\nvar react_dom = __webpack_require__(5);\nvar react_dom_default = /*#__PURE__*/__webpack_require__.n(react_dom);\n\n// EXTERNAL MODULE: ./src/index.css\nvar src = __webpack_require__(23);\n\n// EXTERNAL MODULE: ./node_modules/react-router-dom/dist/index.js\nvar dist = __webpack_require__(8);\n\n// EXTERNAL MODULE: ./node_modules/react-router/dist/index.js\nvar react_router_dist = __webpack_require__(2);\n\n// EXTERNAL MODULE: ./node_modules/jwt-decode/build/esm/index.js\nvar esm = __webpack_require__(17);\n\n// EXTERNAL MODULE: ./node_modules/axios/index.js\nvar axios = __webpack_require__(18);\nvar axios_default = /*#__PURE__*/__webpack_require__.n(axios);\n\n// CONCATENATED MODULE: ./src/services/api.js\n// src/services/api.js\nconst api=axios_default.a.create({baseURL:\"http://localhost:8080/api/users\"// <-- target user-related routes\n});/* harmony default export */ var services_api = (api);\n// CONCATENATED MODULE: ./src/services/authServices.js\nfunction loginUser(credentials){return services_api.post(\"/users/login\",credentials);}function registerUser(userData){return services_api.post(\"/users/register\",userData);}// Add a function to get protected user data\nfunction getProfile(token){return services_api.get(\"/users/profile\",{headers:{Authorization:\"Bearer \".concat(token)}});}\n// EXTERNAL MODULE: ./node_modules/react/jsx-runtime.js\nvar jsx_runtime = __webpack_require__(3);\n\n// CONCATENATED MODULE: ./src/login.js\nfunction Login(_ref){let{onLogin}=_ref;const[email,setEmail]=Object(react[\"useState\"])(\"\");const[password,setPassword]=Object(react[\"useState\"])(\"\");const[error,setError]=Object(react[\"useState\"])(\"\");const handleSubmit=async e=>{e.preventDefault();try{var _res$data,_res$data2;const res=await loginUser({email,password});if((_res$data=res.data)!==null&&_res$data!==void 0&&_res$data.user&&(_res$data2=res.data)!==null&&_res$data2!==void 0&&_res$data2.token){// store token and user in localStorage\nlocalStorage.setItem(\"token\",res.data.token);localStorage.setItem(\"user\",JSON.stringify(res.data.user));onLogin(res.data.user);// update state\n}else{setError(\"Invalid response from server\");}}catch(err){var _err$response,_err$response$data;setError(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.error)||\"Server error, please try again later.\");}};return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"h2\",{children:\"Login\"}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{type:\"email\",placeholder:\"Email\",value:email,onChange:e=>setEmail(e.target.value),required:true}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{type:\"password\",placeholder:\"Password\",value:password,onChange:e=>setPassword(e.target.value),required:true}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{type:\"submit\",children:\"Login\"})]}),error&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"p\",{style:{color:\"red\"},children:error})]});}\n// CONCATENATED MODULE: ./src/register.js\nfunction Register(){const[email,setEmail]=Object(react[\"useState\"])(\"\");const[password,setPassword]=Object(react[\"useState\"])(\"\");const[error,setError]=Object(react[\"useState\"])(\"\");const navigate=Object(react_router_dist[\"q\" /* useNavigate */])();const handleSubmit=async e=>{e.preventDefault();try{await registerUser({email,password});alert(\"✅ Registration successful! Please login.\");navigate(\"/login\");}catch(err){var _err$response,_err$response$data;setError(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.error)||\"Registration failed.\");console.error(\"Register error:\",err);}};return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"auth-container\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"h2\",{children:\"Register\"}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{type:\"email\",placeholder:\"Email\",value:email,onChange:e=>setEmail(e.target.value),required:true}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{type:\"password\",placeholder:\"Password\",value:password,onChange:e=>setPassword(e.target.value),required:true}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{type:\"submit\",children:\"Register\"})]}),error&&/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"p\",{style:{color:\"red\"},children:error}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"p\",{onClick:()=>navigate(\"/login\"),style:{cursor:\"pointer\"},children:\"Already have an account? Login\"})]});}/* harmony default export */ var register = (Register);\n// CONCATENATED MODULE: ./src/Tasks.js\nfunction Tasks(_ref){let{user,onLogout}=_ref;const[task,setTask]=Object(react[\"useState\"])(\"\");const[tasks,setTasks]=Object(react[\"useState\"])([]);const token=localStorage.getItem(\"token\");const fetchTasks=async()=>{const res=await services_api.get(\"/tasks\",{headers:{Authorization:\"Bearer \".concat(token)}});setTasks(res.data);};const createTask=async()=>{const res=await services_api.post(\"/tasks\",{title:task},{headers:{Authorization:\"Bearer \".concat(token)}});setTasks([...tasks,res.data]);setTask(\"\");};useEffect(()=>{fetchTasks();},[]);return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"h2\",{children:[\"Welcome, \",user.name]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{value:task,onChange:e=>setTask(e.target.value),placeholder:\"New task\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{onClick:createTask,children:\"Add Task\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"ul\",{children:tasks.map(t=>/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"li\",{children:t.title},t.id))}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{onClick:onLogout,children:\"Logout\"})]});}\n// CONCATENATED MODULE: ./src/App.js\nfunction App(){const[user,setUser]=Object(react[\"useState\"])(null);// Check for stored token and user on app load\nObject(react[\"useEffect\"])(()=>{const token=localStorage.getItem(\"token\");const storedUser=localStorage.getItem(\"user\");if(token){try{const{exp}=Object(esm[\"a\" /* jwtDecode */])(token);if(Date.now()>=exp*1000){// Token expired\nlocalStorage.clear();setUser(null);}else if(storedUser){setUser(JSON.parse(storedUser));}}catch(err){console.error(\"Invalid token:\",err);localStorage.clear();setUser(null);}}},[]);// Keep user in sync with localStorage\nObject(react[\"useEffect\"])(()=>{if(user){localStorage.setItem(\"user\",JSON.stringify(user));}else{localStorage.removeItem(\"user\");}},[user]);// Logout handler\nconst handleLogout=()=>{localStorage.removeItem(\"token\");localStorage.removeItem(\"user\");setUser(null);window.location.href=\"/login\";};const isAuthenticated=!!localStorage.getItem(\"token\");return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(dist[\"a\" /* BrowserRouter */],{children:/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(react_router_dist[\"d\" /* Routes */],{children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router_dist[\"b\" /* Route */],{path:\"/login\",element:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Login,{onLogin:setUser})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router_dist[\"b\" /* Route */],{path:\"/register\",element:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(register,{})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router_dist[\"b\" /* Route */],{path:\"/tasks\",element:isAuthenticated?/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Tasks,{user:user,onLogout:handleLogout}):/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router_dist[\"a\" /* Navigate */],{to:\"/login\",replace:true})}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router_dist[\"b\" /* Route */],{path:\"*\",element:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_router_dist[\"a\" /* Navigate */],{to:\"/login\",replace:true})})]})});}/* harmony default export */ var src_App = (App);\n// CONCATENATED MODULE: ./src/index.js\nreact_dom_default.a.render(/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(react_default.a.StrictMode,{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"app-wrapper\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(src_App,{})})}),document.getElementById(\"root\"));\n\n/***/ })\n\n},[[44,1,2]]]);","inputSourceMap":{"version":3,"sources":["/Users/saniyaacharya/Desktop/3-tier-app-Deployment-1/frontend/node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-4-0!/Users/saniyaacharya/Desktop/3-tier-app-Deployment-1/frontend/node_modules/css-loader/dist/cjs.js??ref--5-oneOf-4-1!/Users/saniyaacharya/Desktop/3-tier-app-Deployment-1/frontend/node_modules/postcss-loader/src/index.js??postcss!/Users/saniyaacharya/Desktop/3-tier-app-Deployment-1/frontend/src/index.css","/Users/saniyaacharya/Desktop/3-tier-app-Deployment-1/frontend/src/services/api.js","/Users/saniyaacharya/Desktop/3-tier-app-Deployment-1/frontend/src/services/authServices.js","/Users/saniyaacharya/Desktop/3-tier-app-Deployment-1/frontend/src/login.js","/Users/saniyaacharya/Desktop/3-tier-app-Deployment-1/frontend/src/register.js","/Users/saniyaacharya/Desktop/3-tier-app-Deployment-1/frontend/src/Tasks.js","/Users/saniyaacharya/Desktop/3-tier-app-Deployment-1/frontend/src/App.js","/Users/saniyaacharya/Desktop/3-tier-app-Deployment-1/frontend/src/index.js"],"names":["api","axios","create","baseURL","loginUser","credentials","post","registerUser","userData","getProfile","token","get","headers","Authorization","concat","Login","_ref","onLogin","email","setEmail","useState","password","setPassword","error","setError","handleSubmit","e","preventDefault","_res$data","_res$data2","res","data","user","localStorage","setItem","JSON","stringify","err","_err$response","_err$response$data","response","_jsxs","children","_jsx","onSubmit","type","placeholder","value","onChange","target","required","style","color","Register","navigate","useNavigate","alert","console","className","onClick","cursor","Tasks","onLogout","task","setTask","tasks","setTasks","getItem","fetchTasks","createTask","title","useEffect","name","map","t","id","App","setUser","storedUser","exp","jwtDecode","Date","now","clear","parse","removeItem","handleLogout","window","location","href","isAuthenticated","Router","Routes","Route","path","element","Navigate","to","replace","ReactDOM","render","React","StrictMode","document","getElementById"],"mappings":"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","file":"x","sourcesContent":["// extracted by mini-css-extract-plugin","// src/services/api.js\nimport axios from \"axios\";\n\nconst api = axios.create({\n  baseURL: \"http://localhost:8080/api/users\", // <-- target user-related routes\n});\n\nexport default api;\n","import api from \"./api\";\n\nexport function loginUser(credentials) {\n  return api.post(\"/users/login\", credentials);\n}\n\nexport function registerUser(userData) {\n  return api.post(\"/users/register\", userData);\n}\n\n// Add a function to get protected user data\nexport function getProfile(token) {\n  return api.get(\"/users/profile\", { headers: { Authorization: `Bearer ${token}` } });\n}\n","import { useState } from \"react\";\nimport { loginUser } from \"./services/authServices\";\n\nexport default function Login({ onLogin }) {\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [error, setError] = useState(\"\");\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    try {\n      const res = await loginUser({ email, password });\n\n      if (res.data?.user && res.data?.token) {\n        // store token and user in localStorage\n        localStorage.setItem(\"token\", res.data.token);\n        localStorage.setItem(\"user\", JSON.stringify(res.data.user));\n\n        onLogin(res.data.user); // update state\n      } else {\n        setError(\"Invalid response from server\");\n      }\n    } catch (err) {\n      setError(\n        err.response?.data?.error || \"Server error, please try again later.\"\n      );\n    }\n  };\n\n  return (\n    <div>\n      <h2>Login</h2>\n      <form onSubmit={handleSubmit}>\n        <input\n          type=\"email\"\n          placeholder=\"Email\"\n          value={email}\n          onChange={(e) => setEmail(e.target.value)}\n          required\n        />\n        <input\n          type=\"password\"\n          placeholder=\"Password\"\n          value={password}\n          onChange={(e) => setPassword(e.target.value)}\n          required\n        />\n        <button type=\"submit\">Login</button>\n      </form>\n      {error && <p style={{ color: \"red\" }}>{error}</p>}\n    </div>\n  );\n}\n","import React, { useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { registerUser } from \"./services/authServices\";\n\nfunction Register() {\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [error, setError] = useState(\"\");\n  const navigate = useNavigate();\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    try {\n      await registerUser({ email, password });\n      alert(\"✅ Registration successful! Please login.\");\n      navigate(\"/login\");\n    } catch (err) {\n      setError(err.response?.data?.error || \"Registration failed.\");\n      console.error(\"Register error:\", err);\n    }\n  };\n\n  return (\n    <div className=\"auth-container\">\n      <h2>Register</h2>\n      <form onSubmit={handleSubmit}>\n        <input\n          type=\"email\"\n          placeholder=\"Email\"\n          value={email}\n          onChange={(e) => setEmail(e.target.value)}\n          required\n        />\n        <input\n          type=\"password\"\n          placeholder=\"Password\"\n          value={password}\n          onChange={(e) => setPassword(e.target.value)}\n          required\n        />\n        <button type=\"submit\">Register</button>\n      </form>\n      {error && <p style={{ color: \"red\" }}>{error}</p>}\n      <p onClick={() => navigate(\"/login\")} style={{ cursor: \"pointer\" }}>\n        Already have an account? Login\n      </p>\n    </div>\n  );\n}\n\nexport default Register;\n","import { useState } from \"react\";\nimport api from \"./services/api\";\n\nexport default function Tasks({ user, onLogout }) {\n  const [task, setTask] = useState(\"\");\n  const [tasks, setTasks] = useState([]);\n\n  const token = localStorage.getItem(\"token\");\n\n  const fetchTasks = async () => {\n    const res = await api.get(\"/tasks\", {\n      headers: { Authorization: `Bearer ${token}` }\n    });\n    setTasks(res.data);\n  };\n\n  const createTask = async () => {\n    const res = await api.post(\n      \"/tasks\",\n      { title: task },\n      { headers: { Authorization: `Bearer ${token}` } }\n    );\n    setTasks([...tasks, res.data]);\n    setTask(\"\");\n  };\n\n  useEffect(() => {\n    fetchTasks();\n  }, []);\n\n  return (\n    <div>\n      <h2>Welcome, {user.name}</h2>\n      <input\n        value={task}\n        onChange={(e) => setTask(e.target.value)}\n        placeholder=\"New task\"\n      />\n      <button onClick={createTask}>Add Task</button>\n      <ul>\n        {tasks.map((t) => (\n          <li key={t.id}>{t.title}</li>\n        ))}\n      </ul>\n      <button onClick={onLogout}>Logout</button>\n    </div>\n  );\n}\n","import { BrowserRouter as Router, Routes, Route, Navigate } from \"react-router-dom\";\nimport { useState, useEffect } from \"react\";\nimport { jwtDecode } from \"jwt-decode\";\n\nimport Login from \"./login\";\nimport Register from \"./register\";\nimport Tasks from \"./Tasks\";\n\nfunction App() {\n  const [user, setUser] = useState(null);\n\n  // Check for stored token and user on app load\n  useEffect(() => {\n    const token = localStorage.getItem(\"token\");\n    const storedUser = localStorage.getItem(\"user\");\n\n    if (token) {\n      try {\n        const { exp } = jwtDecode(token);\n        if (Date.now() >= exp * 1000) {\n          // Token expired\n          localStorage.clear();\n          setUser(null);\n        } else if (storedUser) {\n          setUser(JSON.parse(storedUser));\n        }\n      } catch (err) {\n        console.error(\"Invalid token:\", err);\n        localStorage.clear();\n        setUser(null);\n      }\n    }\n  }, []);\n\n  // Keep user in sync with localStorage\n  useEffect(() => {\n    if (user) {\n      localStorage.setItem(\"user\", JSON.stringify(user));\n    } else {\n      localStorage.removeItem(\"user\");\n    }\n  }, [user]);\n\n  // Logout handler\n  const handleLogout = () => {\n    localStorage.removeItem(\"token\");\n    localStorage.removeItem(\"user\");\n    setUser(null);\n    window.location.href = \"/login\";\n  };\n\n  const isAuthenticated = !!localStorage.getItem(\"token\");\n\n  return (\n    <Router>\n      {/* Optional Navbar */}\n      {/* <Navbar user={user} onLogout={handleLogout} /> */}\n\n      <Routes>\n        <Route path=\"/login\" element={<Login onLogin={setUser} />} />\n        <Route path=\"/register\" element={<Register />} />\n        <Route\n          path=\"/tasks\"\n          element={\n            isAuthenticated ? (\n              <Tasks user={user} onLogout={handleLogout} />\n            ) : (\n              <Navigate to=\"/login\" replace />\n            )\n          }\n        />\n        <Route path=\"*\" element={<Navigate to=\"/login\" replace />} />\n      </Routes>\n    </Router>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n    <React.StrictMode>\n        <div className=\"app-wrapper\">\n            <App />\n        </div>\n    </React.StrictMode>,\n    document.getElementById(\"root\")\n);\n\n"]}}