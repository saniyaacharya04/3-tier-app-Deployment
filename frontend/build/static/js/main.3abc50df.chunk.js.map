{"version":3,"sources":["services/api.js","login.js","services/authServices.js","register.js","Tasks.js","App.js","index.js"],"names":["BASE_URL","process","api","axios","create","baseURL","concat","Login","_ref","onLogin","email","setEmail","useState","password","setPassword","error","setError","navigate","useNavigate","_jsxs","children","_jsx","onSubmit","async","e","preventDefault","_res$data","_res$data2","res","credentials","post","data","user","token","localStorage","setItem","JSON","stringify","err","_err$response","_err$response$data","response","type","placeholder","value","onChange","target","required","style","color","Register","formData","setFormData","name","handleChange","prev","_objectSpread","className","userData","alert","console","onClick","cursor","Tasks","propUser","onLogout","task","setTask","description","setDescription","tasks","setTasks","editingId","setEditingId","editText","setEditText","getItem","id","parse","useEffect","warn","cancelEditing","updateTask","put","title","headers","Authorization","map","t","get","fetchTasks","padding","marginBottom","width","marginLeft","trim","log","userId","payload","user_id","status","_Fragment","startEditing","delete","filter","deleteTask","marginTop","App","setUser","loading","setLoading","storedUser","exp","jwtDecode","Date","now","clear","window","location","href","parsedUser","removeItem","isAuthenticated","Router","Routes","Route","path","element","handleLogout","Navigate","to","replace","ReactDOM","render","React","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.3abc50df.chunk.js","sourcesContent":["import axios from \"axios\";\n\n// Use environment variable for base URL\nconst BASE_URL = process.env.REACT_APP_API_URL || \"http://localhost:8080/api\";\n\nconst api = axios.create({\n  baseURL: BASE_URL,\n});\n\n// Optional: helper endpoints\nexport const userApi = axios.create({\n  baseURL: `${BASE_URL}/users`,\n});\n\nexport const taskApi = axios.create({\n  baseURL: `${BASE_URL}/tasks`,\n});\n\nexport default api;\n","import { useState } from \"react\";\nimport { loginUser } from \"./services/authServices\";\nimport { useNavigate } from \"react-router-dom\";\n\nexport default function Login({ onLogin }) {\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [error, setError] = useState(\"\");\n  const navigate = useNavigate(); // ✅ Add this\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    try {\n      const res = await loginUser({ email, password });\n\n      if (res.data?.user && res.data?.token) {\n        localStorage.setItem(\"token\", res.data.token);\n        localStorage.setItem(\"user\", JSON.stringify(res.data.user));\n\n        onLogin(res.data.user);\n        navigate(\"/tasks\"); // ✅ Redirect after login\n      } else {\n        setError(\"Invalid response from server\");\n      }\n    } catch (err) {\n      setError(\n        err.response?.data?.error || \"Server error, please try again later.\"\n      );\n    }\n  };\n\n  return (\n    <div>\n      <h2>Login</h2>\n      <form onSubmit={handleSubmit}>\n        <input\n          type=\"email\"\n          placeholder=\"Email\"\n          value={email}\n          onChange={(e) => setEmail(e.target.value)}\n          required\n        />\n        <input\n          type=\"password\"\n          placeholder=\"Password\"\n          value={password}\n          onChange={(e) => setPassword(e.target.value)}\n          required\n        />\n        <button type=\"submit\">Login</button>\n      </form>\n      {error && <p style={{ color: \"red\" }}>{error}</p>}\n    </div>\n  );\n}\n","import api from \"./api\";\n\nexport function loginUser(credentials) {\n  return api.post(\"/users/login\", credentials);\n}\n\nexport function registerUser(userData) {\n  return api.post(\"/users/register\", userData);\n}\n\n// Add a function to get protected user data\nexport function getProfile(token) {\n  return api.get(\"/users/profile\", { headers: { Authorization: `Bearer ${token}` } });\n}\n","import React, { useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { registerUser } from \"./services/authServices\";\n\nfunction Register() {\n  const [formData, setFormData] = useState({\n    name: \"\",\n    email: \"\",\n    password: \"\",\n  });\n  const [error, setError] = useState(\"\");\n  const navigate = useNavigate();\n\n  const handleChange = (e) => {\n    setFormData((prev) => ({\n      ...prev,\n      [e.target.name]: e.target.value,\n    }));\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    const { name, email, password } = formData;\n\n    if (!name || !email || !password) {\n      setError(\"All fields are required.\");\n      return;\n    }\n\n    try {\n      await registerUser({ name, email, password });\n      alert(\"✅ Registration successful! Please login.\");\n      navigate(\"/login\");\n    } catch (err) {\n      setError(err.response?.data?.error || \"Registration failed.\");\n      console.error(\"Register error:\", err);\n    }\n  };\n\n  return (\n    <div className=\"auth-container\">\n      <h2>Register</h2>\n      <form onSubmit={handleSubmit}>\n        <input\n          type=\"text\"\n          name=\"name\"\n          placeholder=\"Name\"\n          value={formData.name}\n          onChange={handleChange}\n          required\n        />\n        <input\n          type=\"email\"\n          name=\"email\"\n          placeholder=\"Email\"\n          value={formData.email}\n          onChange={handleChange}\n          required\n        />\n        <input\n          type=\"password\"\n          name=\"password\"\n          placeholder=\"Password\"\n          value={formData.password}\n          onChange={handleChange}\n          required\n        />\n        <button type=\"submit\">Register</button>\n      </form>\n      {error && <p style={{ color: \"red\" }}>{error}</p>}\n      <p onClick={() => navigate(\"/login\")} style={{ cursor: \"pointer\", color: \"#007bff\" }}>\n        Already have an account? Login\n      </p>\n    </div>\n  );\n}\n\nexport default Register;\n","import React, { useState, useEffect } from \"react\";\nimport api from \"./services/api\";\n\nexport default function Tasks({ user: propUser, onLogout }) {\n  const [task, setTask] = useState(\"\");\n  const [description, setDescription] = useState(\"\");\n  const [tasks, setTasks] = useState([]);\n  const [editingId, setEditingId] = useState(null);\n  const [editText, setEditText] = useState(\"\");\n  const token = localStorage.getItem(\"token\");\n\n  // Ensure user is available even if prop is lost\n  const user = propUser?.id ? propUser : JSON.parse(localStorage.getItem(\"user\"));\n\n  useEffect(() => {\n    if (!user?.id) {\n      console.warn(\"User ID missing — redirecting to login\");\n      onLogout();\n    }\n  }, [user, onLogout]);\n\n  const fetchTasks = async () => {\n    try {\n      const res = await api.get(\"/tasks\", {\n        headers: { Authorization: `Bearer ${token}` }\n      });\n      setTasks(res.data);\n    } catch (err) {\n      console.error(\"Failed to fetch tasks:\", err);\n    }\n  };\n\n  const createTask = async () => {\n    if (!user?.id || !task.trim()) {\n      alert(\"User ID and task title are required\");\n      console.log(\"Debug:\", { userId: user?.id, task });\n      return;\n    }\n\n    const payload = {\n      user_id: user.id,\n      title: task,\n      description: description || \"\",\n      status: \"pending\"\n    };\n\n    try {\n      const res = await api.post(\"/tasks\", payload, {\n        headers: { Authorization: `Bearer ${token}` }\n      });\n      setTasks([...tasks, res.data]);\n      setTask(\"\");\n      setDescription(\"\");\n    } catch (err) {\n      console.error(\"Failed to create task:\", err);\n      alert(\"❌ Task creation failed\");\n    }\n  };\n\n  const deleteTask = async (id) => {\n    try {\n      await api.delete(`/tasks/${id}`, {\n        headers: { Authorization: `Bearer ${token}` }\n      });\n      setTasks(tasks.filter((t) => t.id !== id));\n    } catch (err) {\n      console.error(\"Failed to delete task:\", err);\n    }\n  };\n\n  const startEditing = (task) => {\n    setEditingId(task.id);\n    setEditText(task.title);\n  };\n\n  const cancelEditing = () => {\n    setEditingId(null);\n    setEditText(\"\");\n  };\n\n  const updateTask = async () => {\n    try {\n      const res = await api.put(\n        `/tasks/${editingId}`,\n        { title: editText },\n        { headers: { Authorization: `Bearer ${token}` } }\n      );\n      setTasks(tasks.map((t) => (t.id === editingId ? res.data : t)));\n      cancelEditing();\n    } catch (err) {\n      console.error(\"Failed to update task:\", err);\n    }\n  };\n\n  useEffect(() => {\n    fetchTasks();\n  }, []);\n\n  return (\n    <div style={{ padding: \"2rem\" }}>\n      <h2>Welcome, {user?.name || \"User\"}</h2>\n\n      <div style={{ marginBottom: \"1rem\" }}>\n        <input\n          value={task}\n          onChange={(e) => setTask(e.target.value)}\n          placeholder=\"New task\"\n          style={{ padding: \"0.5rem\", width: \"300px\" }}\n        />\n        <input\n          value={description}\n          onChange={(e) => setDescription(e.target.value)}\n          placeholder=\"Description\"\n          style={{ padding: \"0.5rem\", width: \"300px\", marginLeft: \"1rem\" }}\n        />\n        <button onClick={createTask} style={{ marginLeft: \"1rem\" }}>\n          Add Task\n        </button>\n      </div>\n\n      <ul>\n        {tasks.map((t) => (\n          <li key={t.id} style={{ marginBottom: \"0.5rem\" }}>\n            {editingId === t.id ? (\n              <>\n                <input\n                  value={editText}\n                  onChange={(e) => setEditText(e.target.value)}\n                  style={{ padding: \"0.3rem\", width: \"250px\" }}\n                />\n                <button onClick={updateTask} style={{ marginLeft: \"0.5rem\" }}>\n                  Save\n                </button>\n                <button onClick={cancelEditing} style={{ marginLeft: \"0.5rem\" }}>\n                  Cancel\n                </button>\n              </>\n            ) : (\n              <>\n                <strong>{t.title}</strong> — {t.description}\n                <button onClick={() => startEditing(t)} style={{ marginLeft: \"1rem\" }}>\n                  Edit\n                </button>\n                <button onClick={() => deleteTask(t.id)} style={{ marginLeft: \"0.5rem\" }}>\n                  Delete\n                </button>\n              </>\n            )}\n          </li>\n        ))}\n      </ul>\n\n      <button onClick={onLogout} style={{ marginTop: \"2rem\" }}>\n        Logout\n      </button>\n    </div>\n  );\n}\n","import { BrowserRouter as Router, Routes, Route, Navigate } from \"react-router-dom\";\nimport { useState, useEffect } from \"react\";\nimport { jwtDecode } from \"jwt-decode\";\n\nimport Login from \"./login\";\nimport Register from \"./register\";\nimport Tasks from \"./Tasks\";\n\nfunction App() {\n  const [user, setUser] = useState(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    const token = localStorage.getItem(\"token\");\n    const storedUser = localStorage.getItem(\"user\");\n\n    if (token) {\n      try {\n        const { exp } = jwtDecode(token);\n        if (Date.now() >= exp * 1000) {\n          localStorage.clear();\n          setUser(null);\n          window.location.href = \"/login\";\n        } else if (storedUser) {\n          const parsedUser = JSON.parse(storedUser);\n          if (parsedUser?.id) {\n            setUser(parsedUser);\n          } else {\n            console.warn(\"User object missing ID\");\n            localStorage.clear();\n            window.location.href = \"/login\";\n          }\n        }\n      } catch (err) {\n        console.error(\"Invalid token:\", err);\n        localStorage.clear();\n        setUser(null);\n        window.location.href = \"/login\";\n      }\n    }\n    setLoading(false);\n  }, []);\n\n  useEffect(() => {\n    if (user) {\n      localStorage.setItem(\"user\", JSON.stringify(user));\n    } else {\n      localStorage.removeItem(\"user\");\n    }\n  }, [user]);\n\n  const handleLogout = () => {\n    localStorage.removeItem(\"token\");\n    localStorage.removeItem(\"user\");\n    setUser(null);\n    window.location.href = \"/login\";\n  };\n\n  const isAuthenticated = !!localStorage.getItem(\"token\");\n\n  return (\n    <Router>\n      <Routes>\n        <Route path=\"/login\" element={<Login onLogin={setUser} />} />\n        <Route path=\"/register\" element={<Register />} />\n        <Route\n          path=\"/tasks\"\n          element={\n            loading ? (\n              <div>Loading...</div>\n            ) : isAuthenticated && user?.id ? (\n              <Tasks user={user} onLogout={handleLogout} />\n            ) : (\n              <Navigate to=\"/login\" replace />\n            )\n          }\n        />\n        <Route\n          path=\"*\"\n          element={\n            isAuthenticated ? (\n              <Navigate to=\"/tasks\" replace />\n            ) : (\n              <Navigate to=\"/login\" replace />\n            )\n          }\n        />\n      </Routes>\n    </Router>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n    <React.StrictMode>\n        <div className=\"app-wrapper\">\n            <App />\n        </div>\n    </React.StrictMode>,\n    document.getElementById(\"root\")\n);\n\n"],"sourceRoot":""}