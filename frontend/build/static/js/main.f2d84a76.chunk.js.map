{"version":3,"sources":["services/api.js","login.js","services/authServices.js","register.js","Tasks.js","App.js","index.js"],"names":["BASE_URL","process","api","axios","create","baseURL","concat","Login","_ref","onLogin","email","setEmail","useState","password","setPassword","error","setError","navigate","useNavigate","_jsxs","children","_jsx","onSubmit","async","e","preventDefault","_res$data","_res$data2","res","credentials","post","data","user","token","localStorage","setItem","JSON","stringify","err","_err$response","_err$response$data","response","type","placeholder","value","onChange","target","required","style","color","Register","className","userData","alert","console","onClick","cursor","Tasks","onLogout","task","setTask","tasks","setTasks","editingId","setEditingId","editText","setEditText","getItem","cancelEditing","updateTask","put","title","headers","Authorization","map","t","id","useEffect","get","fetchTasks","padding","name","marginBottom","width","marginLeft","_Fragment","startEditing","delete","filter","deleteTask","marginTop","App","setUser","storedUser","exp","jwtDecode","Date","now","clear","parse","removeItem","isAuthenticated","Router","Routes","Route","path","element","handleLogout","window","location","href","Navigate","to","replace","ReactDOM","render","React","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.f2d84a76.chunk.js","sourcesContent":["import axios from \"axios\";\n\n// Use environment variable for base URL\nconst BASE_URL = process.env.REACT_APP_API_URL || \"http://localhost:8080/api\";\n\nconst api = axios.create({\n  baseURL: BASE_URL,\n});\n\n// Optional: helper endpoints\nexport const userApi = axios.create({\n  baseURL: `${BASE_URL}/users`,\n});\n\nexport const taskApi = axios.create({\n  baseURL: `${BASE_URL}/tasks`,\n});\n\nexport default api;\n","import { useState } from \"react\";\nimport { loginUser } from \"./services/authServices\";\nimport { useNavigate } from \"react-router-dom\";\n\nexport default function Login({ onLogin }) {\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [error, setError] = useState(\"\");\n  const navigate = useNavigate(); // ✅ Add this\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    try {\n      const res = await loginUser({ email, password });\n\n      if (res.data?.user && res.data?.token) {\n        localStorage.setItem(\"token\", res.data.token);\n        localStorage.setItem(\"user\", JSON.stringify(res.data.user));\n\n        onLogin(res.data.user);\n        navigate(\"/tasks\"); // ✅ Redirect after login\n      } else {\n        setError(\"Invalid response from server\");\n      }\n    } catch (err) {\n      setError(\n        err.response?.data?.error || \"Server error, please try again later.\"\n      );\n    }\n  };\n\n  return (\n    <div>\n      <h2>Login</h2>\n      <form onSubmit={handleSubmit}>\n        <input\n          type=\"email\"\n          placeholder=\"Email\"\n          value={email}\n          onChange={(e) => setEmail(e.target.value)}\n          required\n        />\n        <input\n          type=\"password\"\n          placeholder=\"Password\"\n          value={password}\n          onChange={(e) => setPassword(e.target.value)}\n          required\n        />\n        <button type=\"submit\">Login</button>\n      </form>\n      {error && <p style={{ color: \"red\" }}>{error}</p>}\n    </div>\n  );\n}\n","import api from \"./api\";\n\nexport function loginUser(credentials) {\n  return api.post(\"/users/login\", credentials);\n}\n\nexport function registerUser(userData) {\n  return api.post(\"/users/register\", userData);\n}\n\n// Add a function to get protected user data\nexport function getProfile(token) {\n  return api.get(\"/users/profile\", { headers: { Authorization: `Bearer ${token}` } });\n}\n","import React, { useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { registerUser } from \"./services/authServices\";\n\nfunction Register() {\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [error, setError] = useState(\"\");\n  const navigate = useNavigate();\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    try {\n      await registerUser({ email, password });\n      alert(\"✅ Registration successful! Please login.\");\n      navigate(\"/login\");\n    } catch (err) {\n      setError(err.response?.data?.error || \"Registration failed.\");\n      console.error(\"Register error:\", err);\n    }\n  };\n\n  return (\n    <div className=\"auth-container\">\n      <h2>Register</h2>\n      <form onSubmit={handleSubmit}>\n        <input\n          type=\"email\"\n          placeholder=\"Email\"\n          value={email}\n          onChange={(e) => setEmail(e.target.value)}\n          required\n        />\n        <input\n          type=\"password\"\n          placeholder=\"Password\"\n          value={password}\n          onChange={(e) => setPassword(e.target.value)}\n          required\n        />\n        <button type=\"submit\">Register</button>\n      </form>\n      {error && <p style={{ color: \"red\" }}>{error}</p>}\n      <p onClick={() => navigate(\"/login\")} style={{ cursor: \"pointer\" }}>\n        Already have an account? Login\n      </p>\n    </div>\n  );\n}\n\nexport default Register;\n","import React, { useState, useEffect } from \"react\";\nimport api from \"./services/api\";\n\nexport default function Tasks({ user, onLogout }) {\n  const [task, setTask] = useState(\"\");\n  const [tasks, setTasks] = useState([]);\n  const [editingId, setEditingId] = useState(null);\n  const [editText, setEditText] = useState(\"\");\n\n  const token = localStorage.getItem(\"token\");\n\n  const fetchTasks = async () => {\n    try {\n      const res = await api.get(\"/tasks\", {\n        headers: { Authorization: `Bearer ${token}` }\n      });\n      setTasks(res.data);\n    } catch (err) {\n      console.error(\"Failed to fetch tasks:\", err);\n    }\n  };\n\n  const createTask = async () => {\n    try {\n      const res = await api.post(\n        \"/tasks\",\n        { title: task },\n        { headers: { Authorization: `Bearer ${token}` } }\n      );\n      setTasks([...tasks, res.data]);\n      setTask(\"\");\n    } catch (err) {\n      console.error(\"Failed to create task:\", err);\n    }\n  };\n\n  const deleteTask = async (id) => {\n    try {\n      await api.delete(`/tasks/${id}`, {\n        headers: { Authorization: `Bearer ${token}` }\n      });\n      setTasks(tasks.filter((t) => t.id !== id));\n    } catch (err) {\n      console.error(\"Failed to delete task:\", err);\n    }\n  };\n\n  const startEditing = (task) => {\n    setEditingId(task.id);\n    setEditText(task.title);\n  };\n\n  const cancelEditing = () => {\n    setEditingId(null);\n    setEditText(\"\");\n  };\n\n  const updateTask = async () => {\n    try {\n      const res = await api.put(\n        `/tasks/${editingId}`,\n        { title: editText },\n        { headers: { Authorization: `Bearer ${token}` } }\n      );\n      setTasks(tasks.map((t) => (t.id === editingId ? res.data : t)));\n      cancelEditing();\n    } catch (err) {\n      console.error(\"Failed to update task:\", err);\n    }\n  };\n\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  useEffect(() => {\n    fetchTasks();\n  }, []);\n\n  return (\n    <div style={{ padding: \"2rem\" }}>\n      <h2>Welcome, {user.name}</h2>\n\n      <div style={{ marginBottom: \"1rem\" }}>\n        <input\n          value={task}\n          onChange={(e) => setTask(e.target.value)}\n          placeholder=\"New task\"\n          style={{ padding: \"0.5rem\", width: \"300px\" }}\n        />\n        <button onClick={createTask} style={{ marginLeft: \"1rem\" }}>\n          Add Task\n        </button>\n      </div>\n\n      <ul>\n        {tasks.map((t) => (\n          <li key={t.id} style={{ marginBottom: \"0.5rem\" }}>\n            {editingId === t.id ? (\n              <>\n                <input\n                  value={editText}\n                  onChange={(e) => setEditText(e.target.value)}\n                  style={{ padding: \"0.3rem\", width: \"250px\" }}\n                />\n                <button onClick={updateTask} style={{ marginLeft: \"0.5rem\" }}>\n                  Save\n                </button>\n                <button onClick={cancelEditing} style={{ marginLeft: \"0.5rem\" }}>\n                  Cancel\n                </button>\n              </>\n            ) : (\n              <>\n                {t.title}\n                <button onClick={() => startEditing(t)} style={{ marginLeft: \"1rem\" }}>\n                  Edit\n                </button>\n                <button onClick={() => deleteTask(t.id)} style={{ marginLeft: \"0.5rem\" }}>\n                  Delete\n                </button>\n              </>\n            )}\n          </li>\n        ))}\n      </ul>\n\n      <button onClick={onLogout} style={{ marginTop: \"2rem\" }}>\n        Logout\n      </button>\n    </div>\n  );\n}\n","import { BrowserRouter as Router, Routes, Route, Navigate } from \"react-router-dom\";\nimport { useState, useEffect } from \"react\";\nimport { jwtDecode } from \"jwt-decode\";\n\nimport Login from \"./login\";\nimport Register from \"./register\";\nimport Tasks from \"./Tasks\";\n\nfunction App() {\n  const [user, setUser] = useState(null);\n\n  // Check for stored token and user on app load\n  useEffect(() => {\n    const token = localStorage.getItem(\"token\");\n    const storedUser = localStorage.getItem(\"user\");\n\n    if (token) {\n      try {\n        const { exp } = jwtDecode(token);\n        if (Date.now() >= exp * 1000) {\n          // Token expired\n          localStorage.clear();\n          setUser(null);\n        } else if (storedUser) {\n          setUser(JSON.parse(storedUser));\n        }\n      } catch (err) {\n        console.error(\"Invalid token:\", err);\n        localStorage.clear();\n        setUser(null);\n      }\n    }\n  }, []);\n\n  // Keep user in sync with localStorage\n  useEffect(() => {\n    if (user) {\n      localStorage.setItem(\"user\", JSON.stringify(user));\n    } else {\n      localStorage.removeItem(\"user\");\n    }\n  }, [user]);\n\n  // Logout handler\n  const handleLogout = () => {\n    localStorage.removeItem(\"token\");\n    localStorage.removeItem(\"user\");\n    setUser(null);\n    window.location.href = \"/login\";\n  };\n\n  const isAuthenticated = !!localStorage.getItem(\"token\");\n\n  return (\n    <Router>\n      {/* Optional Navbar */}\n      {/* <Navbar user={user} onLogout={handleLogout} /> */}\n\n      <Routes>\n        <Route path=\"/login\" element={<Login onLogin={setUser} />} />\n        <Route path=\"/register\" element={<Register />} />\n        <Route\n          path=\"/tasks\"\n          element={\n            isAuthenticated ? (\n              <Tasks user={user} onLogout={handleLogout} />\n            ) : (\n              <Navigate to=\"/login\" replace />\n            )\n          }\n        />\n        <Route path=\"*\" element={<Navigate to=\"/login\" replace />} />\n      </Routes>\n    </Router>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n    <React.StrictMode>\n        <div className=\"app-wrapper\">\n            <App />\n        </div>\n    </React.StrictMode>,\n    document.getElementById(\"root\")\n);\n\n"],"sourceRoot":""}